<div class="d-flex flex-column flex-sm-row flex-wrap gap-2">
  <h3 class="me-5"> Import Items</h3>
  <%= form_tag import_collections_path, method: :post, multipart: true, onsubmit: "return showImportStart()" do %>
    <%= label_tag 'files_', 'Choose CSV files to import:', class: 'visually-hidden' %>
    <%= file_field_tag 'files[]', accept: ".csv", multiple: true %>
    <%= hidden_field_tag :collection_id, @collection.id %>
    <%= button_tag type: 'submit', class: 'btn btn-primary' do %>
    Import <i class="bi bi-box-arrow-in-down"></i>
    <% end %>
  <% end %>
</div>
<p>To import items into this collection, please upload two CSV files in the following order:</p>
<ul>
  <li><strong>First file:</strong> Occurrence data</li>
  <li><strong>Second file:</strong> Identification data</li>
</ul>

<script>
  function showImportStart() {
    
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
      alert.remove();
    });

    const newAlert = document.createElement('div');
    newAlert.className = 'alert alert-info alert-dismissible fade show';
    newAlert.setAttribute('role', 'alert');
    newAlert.innerHTML = `
      Import Started...
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    `;

    const container = document.querySelector('.position-absolute.end-0.p-2');
    if (container) {
      container.prepend(newAlert);
    } else {
      document.body.prepend(newAlert);
    }
  }
</script>
