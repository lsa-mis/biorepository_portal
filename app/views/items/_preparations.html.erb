<div data-controller="preparation">
  <div class="d-flex overflow-auto gap-9 pb-2 pe-5 white-space-nowrap">
    <% @preparations.each_with_index do |prep, index| %>
      <button class="btn btn-outline-secondary flex-shrink-0 prep-btn"
              data-action="click->preparation#select"
              data-preparation-target="button"
              data-prep-id="<%= index %>">
        <%= prep.prep_type %>
      </button>
    <% end %>
  </div>

  <!-- Details Section -->
  <% @preparations.each_with_index do |prep, index| %>
    <div class="prep-detail d-none mt-4" data-preparation-target="detail" data-prep-id="<%= index %>">
      <div class="card p-4 shadow-sm">
        <% if prep.prep_type.present? %>
          <p><strong>Preparation Type:</strong> <%= prep.prep_type %></p>
        <% end %>
        <% if prep.barcode.present? %>
          <p><strong>Barcode:</strong> <%= prep.barcode %></p>
        <% end %>
        <% if prep.description.present? %>
          <p><strong>Description:</strong> <%= prep.description %></p>
        <% end %>
        <% if prep.count.present? %>
          <p><strong>Count:</strong> <%= prep.count %></p>
        <% end %>
        <div class="mt-3">
          <h6 class="fw-semibold mb-1">Select Quantity</h6>
          <div class="d-flex gap-3">
            <select class="form-select w-auto">
              <% (1..prep.count).each do |n| %>
                <option><%= n %></option>
              <% end %>
            </select>
            <button class="btn btn-primary">Add to Cart</button>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
